---
import Link from '~/components/Link'
import pkg from '../../package.json'
import { copyright } from '~/lib/constants'

const lastUpdated = new Date().toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
})

const astroVersion = pkg.dependencies.astro.replace('^', '')
const solidVersion = pkg.dependencies['solid-js'].replace('^', '')

const currentYear = new Date().getFullYear()
const copyrightYears = currentYear > copyright.startYear ? `${copyright.startYear}-PRESENT` : `${copyright.startYear}`
---

<footer
  class="py-8 text-sm text-muted-foreground gap-1 mx-auto text-center flex flex-col justify-center lg:justify-around lg:flex-row w-full lg:max-w-7xl lg:items-center lg:px-8"
>
  <p class="order-1 lg:order-0">
    Powered by <Link href="https://astro.build/" external variant="underline" class="font-bold">Astro</Link> v{
      astroVersion
    }
    and <Link href="https://www.solidjs.com/" external variant="underline" class="font-bold">SolidJS</Link> v{
      solidVersion
    }
  </p>
  <p class="order-0 lg:order-1">
    <Link href={copyright.license.url} external variant="underline">{copyright.license.name}</Link>
    {copyrightYears} Â© {copyright.owner}
  </p>
  <p class="order-2 lg:order-2">Last updated on {lastUpdated}</p>
</footer>
